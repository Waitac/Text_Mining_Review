ğŸ“ MineraÃ§Ã£o de Texto â€” Reviews Americanas
Projeto de anÃ¡lise de sentimento em portuguÃªs para classificar reviews em trÃªs categorias: Insatisfeito, Neutro e Satisfeito, utilizando o modelo BERTimbau (neuralmind/bert-base-portuguese-cased).

Entrada: review_title + review_text.
RÃ³tulos: derivados de overall_rating (1â€“2 Negativo, 3 Neutro, 4â€“5 Positivo).
SaÃ­das: melhor checkpoint, relatÃ³rios de mÃ©tricas e matriz de confusÃ£o.

ğŸ“‚ Estrutura do projeto
bash
text-mining-reviews/
â”‚
â”œâ”€â”€ data/
â”‚ â”œâ”€â”€ raw/ # Dados brutos (B2W-Reviews01.csv)
â”‚ â””â”€â”€ processed/ # (opcional) dados tratados
â”‚
â”œâ”€â”€ models/
â”‚ â””â”€â”€ bertimbau_reviews/ # Checkpoints; best/ apÃ³s treino
â”‚
â”œâ”€â”€ reports/
â”‚ â”œâ”€â”€ logs/ # Logs de treinamento
â”‚ â””â”€â”€ confusion_matrix.png # Figura gerada na avaliaÃ§Ã£o
â”‚
â”œâ”€â”€ src/
â”‚ â”œâ”€â”€ preprocessing.py # Limpeza mÃ­nima (URLs/HTML/espaÃ§os)
â”‚ â”œâ”€â”€ dataset.py # Concatena tÃ­tulo+texto, mapeia rÃ³tulos e faz splits
â”‚ â”œâ”€â”€ treino.py # Fine-tuning com Trainer (mÃ©tricas e checkpoints)
â”‚ â””â”€â”€ avaliacao.py # Classification report + matriz de confusÃ£o
â”‚
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md

âœ… Requisitos

Python 3.9+ (recomendado 3.10/3.11).

Pip e venv.

GPU CUDA opcional (acelera treino; CPU tambÃ©m funciona).

InstalaÃ§Ã£o do ambiente
bash

criar e ativar ambiente virtual
python -m venv .venv

Windows: .venv\Scripts\activate
Linux/Mac:
source .venv/bin/activate

instalar dependÃªncias do projeto (exceto PyTorch)
pip install --upgrade pip
pip install -r requirements.txt

InstalaÃ§Ã£o do PyTorch
Escolha um dos comandos conforme o ambiente. Para outras combinaÃ§Ãµes (ROCm/versÃµes especÃ­ficas), use o seletor oficial de instalaÃ§Ã£o do PyTorch.

CPU (sem GPU)
bash
pip install torch torchvision torchaudio

NVIDIA CUDA (exemplo CUDA 11.8; ajuste cuXXX conforme sua CUDA)
bash
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118

VerificaÃ§Ã£o rÃ¡pida
python
import torch
print(torch.version)
print("CUDA disponÃ­vel?", torch.cuda.is_available())

ğŸ“¥ Dados

Baixe o CSV original (B2W-Reviews01.csv) e coloque em: data/raw/B2W-Reviews01.csv.

O pipeline seleciona as colunas necessÃ¡rias, concatena review_title + review_text e cria rÃ³tulos a partir de overall_rating automaticamente.

ğŸš€ Como executar

Preparar dados (checagem rÃ¡pida opcional)
bash
python -c "from src.dataset import load_data, prepare_data; df=load_data(); tr, va, te, *_=prepare_data(df); print(tr.head()); print({k:int(v) for k,v in tr.label.value_counts().sort_index().to_dict().items()})"

Treinar o modelo (fineâ€‘tuning BERTimbau)
bash
python -m src.treino

Usa neuralmind/bert-base-portuguese-cased

Ã‰pocas: 3 | Batch: 8 (CPU-friendly) | LR: 2e-5

MÃ©trica do melhor modelo: F1 Macro

Salva o melhor em models/bertimbau_reviews/best e logs em reports/logs.

Avaliar no conjunto de teste
bash
python -m src.avaliacao

Carrega o melhor checkpoint

Imprime classification_report

Salva a matriz de confusÃ£o em reports/confusion_matrix.png.


Deploy

o deploy serÃ¡ feito com flask, no terminal rode o comando:
python app.py

ğŸ§  Mapeamento de rÃ³tulos

1â€“2 â†’ 0 (NEGATIVO)

3 â†’ 1 (NEUTRO)

4â€“5 â†’ 2 (POSITIVO)
Os mapeamentos sÃ£o injetados no cabeÃ§alho do modelo e usados em relatÃ³rios.

âš™ï¸ ConfiguraÃ§Ãµes Ãºteis

Comprimento mÃ¡ximo: ajuste max_length=128 em src/treino.py e src/avaliacao.py conforme o tamanho mÃ©dio das reviews.

Mais Ã©pocas ou early stopping: altere num_train_epochs e habilite callback de EarlyStopping em treino.py.

TensorBoard: troque report_to=["none"] por ["tensorboard"] nos argumentos de treino e rode:
bash
tensorboard --logdir reports/logs

ğŸ§ª VerificaÃ§Ãµes de sanidade
DistribuiÃ§Ã£o estratificada das classes por split:
bash
python -c "from src.dataset import load_data, prepare_data; df=load_data(); tr, va, te, *_=prepare_data(df); import pandas as pd; print('train:', tr.label.value_counts(normalize=True).round(3).to_dict()); print('val:', va.label.value_counts(normalize=True).round(3).to_dict()); print('test:', te.label.value_counts(normalize=True).round(3).to_dict())"

ğŸ› ï¸ SoluÃ§Ã£o de problemas

Colunas ausentes: o CSV precisa ter review_title, review_text e overall_rating.

Treino em CPU muito lento: reduza Ã©pocas para 1â€“2, use batch 8 e mantenha max_length=128; considere amostrar 20â€“30k linhas na fase de protÃ³tipo.

Ãndice fantasma ("index_level_0"): o treino usa preserve_index=False ao criar o Dataset.

ğŸ“„ LicenÃ§a e crÃ©ditos

Modelo base: BERTimbau â€” NeuralMind (repositÃ³rio/termos aplicÃ¡veis).

Dataset: B2W-Reviews01 (Americanas).

Projeto para fins educacionais e de pesquisa.